<?xml version="1.0" ?>
<root>	
	<Children>
		<FrameWindow name="TestWindow" file="guitest\testfr.xml" >
			<Children>
				<Panel name="TestSubWindow">
					<Children>
						<Editbox name="TestSubEditWindow" >
							<Properties>
								<Password>true</Password>
							</Properties>
						</Editbox>
					</Children>
				</Panel>
			</Children>
		</FrameWindow>
		<FrameWindow name="TestWindow2" file="guitest\testfr.xml" >
			<Properties>
					<Pos>256 0</Pos>
					<Movable>false</Movable>
					<ClampToScreen>false</ClampToScreen>
			</Properties>
		</FrameWindow>
		<FrameWindow name="TestWindow3" file="guitest\testfr.xml" >
			<Properties>
					<Pos>512 0</Pos>
					<Movable>false</Movable>
					<ClampToScreen>false</ClampToScreen>
			</Properties>
		</FrameWindow>
		<FrameWindow name="TestWindow4" file="guitest\testfr.xml" >
			<Properties>
					<Pos>0 128</Pos>
					<Movable>false</Movable>
					<ClampToScreen>false</ClampToScreen>
			</Properties>
		</FrameWindow>
		<FrameWindow name="TestWindow5" file="guitest\testfr.xml" >
			<Properties>
					<Pos>256 128</Pos>
					<Movable>false</Movable>
					<ClampToScreen>false</ClampToScreen>
			</Properties>
		</FrameWindow>
		<FrameWindow name="TestWindow6" file="guitest\testfr.xml" >
			<Properties>
					<Pos>512 128</Pos><Size>256 154</Size>
					<Movable>false</Movable>
					<ClampToScreen>false</ClampToScreen>
			</Properties>
		</FrameWindow>
	</Children>
    <Events>
        <On_Load>
           log:msg("Password mode is 555655");
           this:send("MAINWINDOW: loaded!");

           local function TEST()
           		log:msg("TEST_EVENT TEST_EVENTTEST_EVENT TEST_EVENT");
           		log:msg(this.type);
           end

           --this:subscribe('TEST_EVENT', nil, 'log:msg("ON TEST EVENT");');
           --TODO: неправильно обрабатывается подобная отправка тк указатель THIS у listener отличный от THIS у base_window
           --this:subscribe('TEST_EVENT', this, TEST); 
           this:subscribe('TEST_EVENT', nil, TEST); 

		   this:send("TEST_EVENT");
		   this:startTick();
        </On_Load>

        <TEST_EVENT>
        	log:msg("TEST_EVENT TEST_EVENTTEST_EVENT TEST_EVENT");
        </TEST_EVENT>
        <On_Tick>
        	log:msg("ONLY ONCE :/");
        	this:stopTick();
        </On_Tick>
    </Events>	
</root>